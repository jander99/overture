name: pre-commit-lint
description: Runs linting checks before committing code to ensure code quality standards

# Event trigger
event: tool-call

# Filter to only trigger on git commit operations
filter:
  tool: Bash
  pattern: "git\\s+commit.*"

# Command to execute
command: |
  #!/bin/bash
  set -e

  echo "Running pre-commit linting checks..."

  # Check for Python files
  if git diff --cached --name-only | grep -q '\.py$'; then
    echo "Linting Python files..."
    git diff --cached --name-only | grep '\.py$' | xargs pylint || {
      echo "Python linting failed. Please fix the issues before committing."
      exit 1
    }
  fi

  # Check for JavaScript/TypeScript files
  if git diff --cached --name-only | grep -qE '\.(js|ts|jsx|tsx)$'; then
    echo "Linting JavaScript/TypeScript files..."
    git diff --cached --name-only | grep -E '\.(js|ts|jsx|tsx)$' | xargs eslint || {
      echo "JavaScript linting failed. Please fix the issues before committing."
      exit 1
    }
  fi

  echo "All linting checks passed!"

# Environment variables
env:
  PYTHONPATH: "${WORKSPACE_ROOT}/src"
  NODE_ENV: "development"

# Dependencies (hooks should not depend on higher-level features)
dependencies: []
